# ワークアウト記録機能の強化 実装計画

ワークアウトの記録において、セットごとの詳細な入力、タイマー機能、統計表示、およびカレンダー形式の履歴表示を追加します。

## ユーザーレビューが必要な事項
- [ ] **データベース変更**: セットごとの記録を保存するために新しいテーブル `workout_sets` を追加します。
- [ ] **UIデザイン**: モバイルでの操作性を重視した、セット追加・コピー機能のインターフェースになります。

## 変更内容

### 1. データベース (Supabase)
セットごとの記録を保持するため、以下のテーブルを追加/更新します。

#### [NEW] `workout_sets`
各ワークアウト種目のセット詳細を保存します。
- `id` (uuid, PK)
- `workout_id` (uuid, FK to workouts)
- `set_number` (int)
- `weight` (numeric)
- `reps` (int)
- `created_at` (timestamptz)

#### [NEW] `exercises` (マスタ)
種目名の候補とデフォルト値を保持します（任意）。
- `id` (uuid, PK)
- `name` (text, unique)
- `category` (text)

### 2. コンポーネント

#### [NEW] `components/WorkoutTimer.vue`
- インターバル計測用のタイマー。
- 目標時間の設定、開始・停止・リセット機能。
- 音またはバイブレーションによる通知（可能であれば）。

#### [NEW] `components/WorkoutSetRow.vue`
- 重量と回数の入力フィールド。
- 前のセットをコピーするボタン。
- セットの削除ボタン。

#### [NEW] `components/WorkoutCalendar.vue`
- トレーニング実施日をマークするカレンダー。
- 日付クリックでその日の詳細表示。

### 3. UI/UX 変更

#### [MODIFY] `pages/workouts/add.vue`
- 種目選択時に過去の記録から「前回の重量・セット・回数」をプレースホルダーとして表示。
- セットを動的に追加・削除できるフォームに変更。

#### [MODIFY] `pages/workouts/index.vue`
- 統計情報（種目ごとのMAX/平均）の表示セクションを追加.
- カレンダー表示の切り替え、または埋め込み。

## 検証プラン

### 手動確認
1. **ワークアウト追加**:
   - 種目を選択すると、デフォルト（または過去）の値が表示されるか。
   - セットを追加し、異なる重量・回数を入力して保存できるか。
   - 「コピー」ボタンで前のセットデータが反映されるか。
2. **タイマー**:
   - 時間を設定して開始し、カウントダウンされるか。
3. **統計**:
   - 記録保存後、MAX値と平均値が正しく計算されて表示されるか。
4. **カレンダー**:
   - 記録した日付がハイライトされ、詳細を確認できるか。

### 自動テスト
- 現時点で自動テスト環境がないため、手動確認を優先しますが、必要に応じて `vitest` 等の導入も検討します。
