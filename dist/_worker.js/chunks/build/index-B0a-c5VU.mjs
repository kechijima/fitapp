import{_ as e}from"./nuxt-link-7MmmsZj2.mjs";import{_ as a}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{u as t}from"./useSupabaseClient-DVkWH2f1.mjs";import{v as s,u as d}from"./server.mjs";import{l as c,o as n,v as r,x as v,g as o,m as l}from"../routes/renderer.mjs";import"../_/nitro.mjs";import"../_/shared.esm-bundler.mjs";const i=s.defineComponent({__name:"WorkoutCalendar",__ssrInlineRender:!0,props:{workoutDates:{}},emits:["select-date"],setup(e,{emit:a}){const t=e,d=new Date,o=s.ref(d.getMonth()),l=s.ref(d.getFullYear()),i=["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],u=s.computed(()=>{const e=[],a=(s=l.value,d=o.value,new Date(s,d,1).getDay());var s,d;const c=((e,a)=>new Date(e,a+1,0).getDate())(l.value,o.value);for(let t=0;t<a;t++)e.push({day:null,fullDate:null});for(let a=1;a<=c;a++){const s=a.toString().padStart(2,"0"),d=(o.value+1).toString().padStart(2,"0"),c=`${l.value}-${d}-${s}`;e.push({day:a,fullDate:c,hasWorkout:t.workoutDates.includes(c)})}return e});return(e,a,t,d)=>{a(`<div${c(s.mergeProps({class:"calendar-card"},d))} data-v-04b9fd80><div class="calendar-header" data-v-04b9fd80><button data-v-04b9fd80>â€¹</button><h2 data-v-04b9fd80>${n(s.unref(l))}å¹´ ${n(i[s.unref(o)])}</h2><button data-v-04b9fd80>â€º</button></div><div class="calendar-grid" data-v-04b9fd80>\x3c!--[--\x3e`),r(["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"],e=>{a(`<div class="day-label" data-v-04b9fd80>${n(e)}</div>`)}),a("\x3c!--]--\x3e\x3c!--[--\x3e"),r(s.unref(u),(e,t)=>{a(`<div class="${v([{"has-workout":e.hasWorkout,empty:!e.day},"calendar-day"])}" data-v-04b9fd80>`),e.day?a(`<span data-v-04b9fd80>${n(e.day)}</span>`):a("\x3c!----\x3e"),e.hasWorkout?a('<div class="dot" data-v-04b9fd80></div>'):a("\x3c!----\x3e"),a("</div>")}),a("\x3c!--]--\x3e</div></div>")}}}),u=i.setup;i.setup=(e,a)=>{const t=s.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/WorkoutCalendar.vue"),u?u(e,a):void 0};const b=a(i,[["__scopeId","data-v-04b9fd80"]]),f=s.defineComponent({__name:"index",__ssrInlineRender:!0,setup(a){const v=t(),i=d(),u=s.ref([]),f=s.ref(!0),m=s.ref(null),p=s.ref([]),x=s.ref(""),h=s.ref(!1),g=s.computed(()=>{const e=new Map;return u.value.forEach(a=>{e.has(a.exercise_name)||e.set(a.exercise_name,{max:0,totalWeight:0,setCount:0});const t=e.get(a.exercise_name);if(a.workout_sets&&a.workout_sets.length>0)a.workout_sets.forEach(e=>{const a=e.weight||0;a>t.max&&(t.max=a),t.totalWeight+=a,t.setCount++});else{const e=a.weight||0;e>t.max&&(t.max=e),t.totalWeight+=e,t.setCount++}}),Array.from(e.entries()).map(([e,a])=>({name:e,max:a.max,avg:a.setCount>0?Math.round(a.totalWeight/a.setCount*10)/10:0}))}),w=s.computed(()=>Array.from(new Set(u.value.map(e=>e.exercise_name))).sort()),_=s.computed(()=>{let e=g.value;if(x.value){const a=x.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(a))}return p.value.length>0?e.filter(e=>p.value.includes(e.name)):e}),k=s.computed(()=>{const e=x.value.toLowerCase();return w.value.filter(a=>!p.value.includes(a)&&a.toLowerCase().includes(e))}),$=s.computed(()=>[...new Set(u.value.map(e=>e.date))]),y=s.computed(()=>{let e=u.value;return m.value&&(e=e.filter(e=>e.date===m.value)),p.value.length>0&&(e=e.filter(e=>p.value.includes(e.exercise_name))),e});s.watchEffect(()=>{i.value&&(async()=>{f.value=!0;const{data:e,error:a}=await v.from("workouts").select("*, workout_sets(*)").order("date",{ascending:!1});e&&(u.value=e),f.value=!1})()});const formatDate=e=>new Date(e).toLocaleDateString("ja-JP");return(a,t,d,v)=>{const i=e,u=b;t(`<div${c(s.mergeProps({class:"workouts-container"},v))} data-v-4cbb97ef><div class="header" data-v-4cbb97ef><h1 data-v-4cbb97ef>ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆ</h1>`),t(o(i,{to:"/workouts/add"+(s.unref(m)?"?date="+s.unref(m):""),class:"btn btn-add"},{default:s.withCtx((e,a,t,d)=>{if(!a)return[s.createTextVNode("ï¼‹ è¨˜éŒ²ã™ã‚‹")];a("ï¼‹ è¨˜éŒ²ã™ã‚‹")}),_:1},d)),t('</div><div class="dashboard-grid" data-v-4cbb97ef><div class="sidebar" data-v-4cbb97ef>'),t(o(u,{"workout-dates":s.unref($),onSelectDate:e=>m.value=s.unref(m)===e?null:e,class:"mb-6"},null,d)),t('<div class="stats-card" data-v-4cbb97ef><div class="stats-header-row" data-v-4cbb97ef><h3 data-v-4cbb97ef>ç¨®ç›®åˆ¥çµ±è¨ˆ (ãƒ•ã‚£ãƒ«ã‚¿è¡¨ç¤º)</h3></div><div class="combobox-container" data-v-4cbb97ef><div class="combobox-input-wrapper" data-v-4cbb97ef>'),s.unref(p).length>0?(t('<div class="chips-area" data-v-4cbb97ef>\x3c!--[--\x3e'),r(s.unref(p),e=>{t(`<span class="filter-chip" data-v-4cbb97ef>${n(e)} <button class="chip-remove" data-v-4cbb97ef>Ã—</button></span>`)}),t("\x3c!--]--\x3e</div>")):t("\x3c!----\x3e"),t(`<input${l("value",s.unref(x))} placeholder="ç¨®ç›®ã‚’é¸æŠ..." class="combobox-input" data-v-4cbb97ef></div>`),s.unref(h)?(t('<div class="combobox-dropdown" data-v-4cbb97ef>\x3c!--[--\x3e'),r(s.unref(k),e=>{t(`<div class="dropdown-item" data-v-4cbb97ef>${n(e)}</div>`)}),t("\x3c!--]--\x3e"),0===s.unref(k).length?t('<div class="dropdown-empty" data-v-4cbb97ef> å€™è£œãŒã‚ã‚Šã¾ã›ã‚“ </div>'):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e"),t('</div><div class="stats-divider" data-v-4cbb97ef></div>'),0===s.unref(_).length?t('<div class="empty-stats" data-v-4cbb97ef> è¡¨ç¤ºã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ </div>'):t("\x3c!----\x3e"),t("\x3c!--[--\x3e"),r(s.unref(_),e=>{t(`<div class="stat-row" data-v-4cbb97ef><div class="stat-name" data-v-4cbb97ef>${n(e.name)}</div><div class="stat-values" data-v-4cbb97ef><div class="stat-item" data-v-4cbb97ef><span class="label" data-v-4cbb97ef>MAX</span><span class="value" data-v-4cbb97ef>${n(e.max)}kg</span></div><div class="stat-item" data-v-4cbb97ef><span class="label" data-v-4cbb97ef>AVG</span><span class="value" data-v-4cbb97ef>${n(e.avg)}kg</span></div></div></div>`)}),t(`\x3c!--]--\x3e</div></div><div class="main-content" data-v-4cbb97ef><div class="section-header" data-v-4cbb97ef><div class="title-with-badge" data-v-4cbb97ef><h2 data-v-4cbb97ef>${n(s.unref(m)?formatDate(s.unref(m)):s.unref(p).length>0?"çµã‚Šè¾¼ã¿ä¸­":"ã™ã¹ã¦ã®å±¥æ­´")}</h2>`),s.unref(m)||s.unref(p).length>0?t(`<span class="filter-badge" data-v-4cbb97ef>${n(s.unref(p).length>0?s.unref(p).length+"ç¨®ç›®":"")} ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä¸­ </span>`):t("\x3c!----\x3e"),t("</div>"),s.unref(m)||s.unref(p).length>0?t('<button class="btn-text" data-v-4cbb97ef>ã™ã¹ã¦è¡¨ç¤º</button>'):t("\x3c!----\x3e"),t("</div>"),s.unref(f)?t('<div class="loading" data-v-4cbb97ef>èª­ã¿è¾¼ã¿ä¸­...</div>'):0===s.unref(y).length?t('<div class="empty" data-v-4cbb97ef><div class="empty-icon" data-v-4cbb97ef>ğŸ“‚</div><p data-v-4cbb97ef>è©²å½“ã™ã‚‹è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p></div>'):(t('<div class="workout-list" data-v-4cbb97ef>\x3c!--[--\x3e'),r(s.unref(y),e=>{t(`<div class="workout-card compact" data-v-4cbb97ef><div class="card-main" data-v-4cbb97ef><div class="card-info" data-v-4cbb97ef><span class="date" data-v-4cbb97ef>${n(formatDate(e.date))}</span><h3 class="exercise-title" data-v-4cbb97ef>${n(e.exercise_name)}</h3></div><div class="card-sets" data-v-4cbb97ef>`),e.workout_sets?(t('<div class="set-chips" data-v-4cbb97ef>\x3c!--[--\x3e'),r(e.workout_sets.slice(0,3),e=>{t(`<div class="set-chip" data-v-4cbb97ef><span class="weight" data-v-4cbb97ef>${n(e.weight)}<small data-v-4cbb97ef>kg</small></span><span class="reps" data-v-4cbb97ef>Ã—${n(e.reps)}</span></div>`)}),t("\x3c!--]--\x3e"),e.workout_sets.length>3?t('<div class="set-more" title="ã•ã‚‰ã«è¡¨ç¤º" data-v-4cbb97ef>...</div>'):t("\x3c!----\x3e"),t("</div>")):t(`<div class="summary-line" data-v-4cbb97ef><span class="summary-item" data-v-4cbb97ef>âš–ï¸ ${n(e.weight)}kg</span><span class="summary-item" data-v-4cbb97ef>ğŸ“Š ${n(e.sets)}s</span><span class="summary-item" data-v-4cbb97ef>ğŸ” ${n(e.reps)}r</span></div>`),t('</div><div class="card-actions" data-v-4cbb97ef>'),t(o(i,{to:`/workouts/edit/${e.id}`,class:"icon-btn",title:"ç·¨é›†"},{default:s.withCtx((e,a,t,d)=>{if(!a)return[s.createTextVNode("âœï¸")];a("âœï¸")}),_:2},d)),t('<button class="icon-btn del" title="å‰Šé™¤" data-v-4cbb97ef>ğŸ—‘ï¸</button></div></div>'),e.note?t(`<p class="card-note" data-v-4cbb97ef>${n(e.note)}</p>`):t("\x3c!----\x3e"),t("</div>")}),t("\x3c!--]--\x3e</div>")),t("</div></div></div>")}}}),m=f.setup;f.setup=(e,a)=>{const t=s.useSSRContext();return(t.modules||(t.modules=new Set)).add("pages/workouts/index.vue"),m?m(e,a):void 0};const p=a(f,[["__scopeId","data-v-4cbb97ef"]]);export{p as default};
//# sourceMappingURL=index-B0a-c5VU.mjs.map
