import{_ as e}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{v as a,c as t,d as n,e as r}from"./server.mjs";import{l as s,o as l,y as u}from"../routes/renderer.mjs";import{K as c}from"../_/shared.esm-bundler.mjs";const o={trailing:!0};function debounce(e,a=25,t={}){if(t={...o,...t},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let n,r,s,l,u=[];const applyFn=(a,n)=>(s=async function(e,a,t){return await e.apply(a,t)}(e,a,n),s.finally(()=>{if(s=null,t.trailing&&l&&!r){const e=applyFn(a,l);return l=null,e}}),s);return function(...e){return s?(t.trailing&&(l=e),s):new Promise(s=>{const l=!r&&t.leading;clearTimeout(r),r=setTimeout(()=>{r=null;const a=t.leading?n:applyFn(this,e);for(const e of u)e(a);u=[]},a),l?(n=applyFn(this,e),s(n)):u.push(s)})}}const i=a.defineComponent({__name:"WorkoutTimer",__ssrInlineRender:!0,props:{defaultRestTime:{},defaultWorkTime:{},currentSet:{},totalSets:{}},setup(e){const t=e,n=a.ref("READY"),r=a.ref(0),o=a.ref(!1);a.ref(null);const i=a.ref(t.defaultRestTime||60),d=a.ref(t.defaultWorkTime||0),v=a.ref(t.currentSet||1),f=a.ref(""),p=a.computed(()=>"WORK"===n.value?d.value:i.value),y=a.computed(()=>"READY"===n.value||"FINISH"===n.value||0===p.value?0:"WORK"===n.value&&0===d.value?100:r.value/p.value*100);return a.watch(()=>t.currentSet,e=>{e&&"READY"===n.value&&(v.value=e)}),a.watch(()=>t.defaultRestTime,e=>{e&&(i.value=e)}),a.watch(()=>t.defaultWorkTime,e=>{e&&(d.value=e)}),(t,p,m,b)=>{var _;p(`<div${s(a.mergeProps({class:["timer-card",a.unref(n).toLowerCase()]},b))} data-v-cbe621f3><div class="timer-inner" data-v-cbe621f3><div class="status-badge" data-v-cbe621f3>${l(a.unref(n))}</div><div class="round-display" data-v-cbe621f3><span class="label" data-v-cbe621f3>ROUND</span><span class="value" data-v-cbe621f3>${l(a.unref(v))} / ${l(e.totalSets||"-")}</span></div><div class="time-display-wrapper" data-v-cbe621f3><svg class="progress-ring" viewBox="0 0 100 100" data-v-cbe621f3><circle class="progress-ring-track" cx="50" cy="50" r="45" data-v-cbe621f3></circle><circle class="progress-ring-fill" cx="50" cy="50" r="45" style="${u({strokeDashoffset:283-283*a.unref(y)/100})}" data-v-cbe621f3></circle></svg><div class="time-main" data-v-cbe621f3>${l((_=a.unref(r),`${Math.floor(_/60)}:${(_%60).toString().padStart(2,"0")}`))} `),"WORK"===a.unref(n)&&0===a.unref(d)?p('<span class="up-arrow" data-v-cbe621f3>â–²</span>'):p("\x3c!----\x3e"),p(`</div></div><div class="timer-settings" data-v-cbe621f3><div class="setting-item" data-v-cbe621f3><label data-v-cbe621f3>Work</label><div class="controls" data-v-cbe621f3><button data-v-cbe621f3>-</button><span data-v-cbe621f3>${l(a.unref(d))}s</span><button data-v-cbe621f3>+</button></div></div><div class="setting-item" data-v-cbe621f3><label data-v-cbe621f3>Rest</label><div class="controls" data-v-cbe621f3><button data-v-cbe621f3>-</button><span data-v-cbe621f3>${l(a.unref(i))}s</span><button data-v-cbe621f3>+</button></div></div></div><div class="action-grid" data-v-cbe621f3>`),a.unref(o)?p('<button class="btn btn-danger" data-v-cbe621f3>STOP</button>'):p('<button class="btn btn-primary" data-v-cbe621f3>START</button>'),p(`<button class="btn btn-secondary"${c("FINISH"===a.unref(n)||"READY"===a.unref(n))?" disabled":""} data-v-cbe621f3>SKIP</button><button class="btn btn-outline" data-v-cbe621f3>RESET</button></div></div>`),a.unref(f)?p(`<div class="toast-popup" data-v-cbe621f3>${l(a.unref(f))}</div>`):p("\x3c!----\x3e"),p("</div>")}}}),d=i.setup;i.setup=(e,t)=>{const n=a.useSSRContext();return(n.modules||(n.modules=new Set)).add("components/WorkoutTimer.vue"),d?d(e,t):void 0};const v=e(i,[["__scopeId","data-v-cbe621f3"]]);a.defineComponent({name:"ServerPlaceholder",render:()=>a.createElementBlock("div")});const f=Symbol.for("nuxt:client-only");a.defineComponent({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t,attrs:n}){const r=a.shallowRef(!1),s=a.getCurrentInstance();return s&&(s._nuxtClientOnly=!0),a.provide(f,!0),()=>{var s;if(r.value){const e=null==(s=t.default)?void 0:s.call(t);return e&&1===e.length?[a.cloneVNode(e[0],n)]:e}const l=t.fallback||t.placeholder;if(l)return a.h(l);const u=e.fallback||e.placeholder||"",c=e.fallbackTag||e.placeholderTag||"span";return a.createElementBlock(c,n,u)}}});function useAsyncData(...e){var s;const l="string"==typeof e[e.length-1]?e.pop():void 0;(function(e,a){if("string"==typeof e)return!1;if("object"==typeof e&&null!==e)return!1;if("function"==typeof e&&"function"==typeof a)return!1;return!0})(e[0],e[1])&&e.unshift(l);let[u,c,o={}]=e;const i=a.computed(()=>a.toValue(u));if("string"!=typeof i.value)throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if("function"!=typeof c)throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const d=t();null!=o.server||(o.server=!0),null!=o.default||(o.default=getDefault),null!=o.getCachedData||(o.getCachedData=getDefaultCachedData),null!=o.lazy||(o.lazy=!1),null!=o.immediate||(o.immediate=!0),null!=o.deep||(o.deep=n.deep),null!=o.dedupe||(o.dedupe="cancel"),o._functionName,d._asyncData[i.value];const v={cause:"initial",dedupe:o.dedupe};(null==(s=d._asyncData[i.value])?void 0:s._init)||(v.cachedData=o.getCachedData(i.value,d,{cause:"initial"}),d._asyncData[i.value]=function(e,t,s,l,u){var c;null!=(c=e.payload._errors)[t]||(c[t]=n.errorValue);const o=l.getCachedData!==getDefaultCachedData,i=s,d=l.deep?a.ref:a.shallowRef,v=null!=u,f=e.hook("app:data:refresh",async e=>{e&&!e.includes(t)||await p.execute({cause:"refresh:hook"})}),p={data:d(v?u:l.default()),pending:a.shallowRef(!v),error:a.toRef(e.payload._errors,t),status:a.shallowRef("idle"),execute:(...s)=>{var u,c;const[o,d]=s,v=o&&void 0===d&&"object"==typeof o?o:{};if(e._asyncDataPromises[t]){if("defer"===(f=null!=(u=v.dedupe)?u:l.dedupe)||!1===f)return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}var f;if("initial"===v.cause||e.isHydrating){const a="cachedData"in v?v.cachedData:l.getCachedData(t,e,{cause:null!=(c=v.cause)?c:"refresh:manual"});if(null!=a)return e.payload.data[t]=p.data.value=a,p.error.value=n.errorValue,p.status.value="success",Promise.resolve(a)}p.pending.value=!0,p.status.value="pending";const y=new Promise((a,t)=>{try{a(i(e))}catch(e){t(e)}}).then(async a=>{if(y.cancelled)return e._asyncDataPromises[t];let r=a;l.transform&&(r=await l.transform(a)),l.pick&&(r=function(e,a){const t={};for(const n of a)t[n]=e[n];return t}(r,l.pick)),e.payload.data[t]=r,p.data.value=r,p.error.value=n.errorValue,p.status.value="success"}).catch(n=>{if(y.cancelled)return e._asyncDataPromises[t];p.error.value=r(n),p.data.value=a.unref(l.default()),p.status.value="error"}).finally(()=>{y.cancelled||(p.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=y,e._asyncDataPromises[t]},_execute:debounce((...e)=>p.execute(...e),0,{leading:!0}),_default:l.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var r;f(),(null==(r=e._asyncData[t])?void 0:r._init)&&(e._asyncData[t]._init=!1),o||a.nextTick(()=>{var a;(null==(a=e._asyncData[t])?void 0:a._init)||(clearNuxtDataByKey(e,t),p.execute=()=>Promise.resolve(),p.data.value=n.value)})}};return p}(d,i.value,c,o,v.cachedData));d._asyncData[i.value]._deps++;if(!1!==o.server&&d.payload.serverRendered&&o.immediate){const e=d._asyncData[i.value].execute(v);a.getCurrentInstance()?a.onServerPrefetch(()=>e):d.hook("app:created",async()=>{await e})}const f={data:writableComputedRef(()=>{var e;return null==(e=d._asyncData[i.value])?void 0:e.data}),pending:writableComputedRef(()=>{var e;return null==(e=d._asyncData[i.value])?void 0:e.pending}),status:writableComputedRef(()=>{var e;return null==(e=d._asyncData[i.value])?void 0:e.status}),error:writableComputedRef(()=>{var e;return null==(e=d._asyncData[i.value])?void 0:e.error}),refresh:(...e)=>d._asyncData[i.value].execute(...e),execute:(...e)=>d._asyncData[i.value].execute(...e),clear:()=>clearNuxtDataByKey(d,i.value)},p=Promise.resolve(d._asyncDataPromises[i.value]).then(()=>f);return Object.assign(p,f),p}function writableComputedRef(e){return a.computed({get(){var a;return null==(a=e())?void 0:a.value},set(a){const t=e();t&&(t.value=a)}})}function clearNuxtDataByKey(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=n.errorValue),e._asyncData[a]&&(e._asyncData[a].data.value=void 0,e._asyncData[a].error.value=n.errorValue,e._asyncData[a].pending.value=!1,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}const getDefault=()=>n.value,getDefaultCachedData=(e,a,t)=>a.isHydrating?a.payload.data[e]:"refresh:manual"!==t.cause&&"refresh:hook"!==t.cause?a.static.data[e]:void 0;export{v as _,useAsyncData as u};
//# sourceMappingURL=asyncData-B05SyPxK.mjs.map
