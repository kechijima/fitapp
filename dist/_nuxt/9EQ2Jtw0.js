import{_ as H}from"./tY4uFk0w.js";import{_ as O,u as P}from"./jxPz-m0W.js";import{g as j,x as J,y as K,r,z as Q,c as u,a as e,t as w,k as l,m as b,A as X,n as U,F as R,B as A,l as Y,d as B,v as C,b as x,w as D,T as Z,o as d,C as ee,q as F,p as S}from"./WFAcvMe-.js";import{u as te}from"./BXMDA6kW.js";import{_ as se}from"./DlAUqK2U.js";const ae={class:"add-container"},oe={class:"header"},le={class:"subtitle"},ne={class:"main-layout"},re={class:"form-section"},ie={class:"form-card"},ue={class:"form-group"},de={class:"select-wrapper"},ce=["value"],pe={class:"sets-list"},ve=["onClick"],_e={class:"set-number"},me={class:"set-input"},fe=["onUpdate:modelValue"],he={class:"set-input"},we=["onUpdate:modelValue"],be={class:"set-actions"},ge=["onClick"],ke=["onClick"],ye={class:"form-group note-area"},Ce={class:"textarea-wrapper"},xe={class:"actions"},Se=["disabled"],Ee={class:"timer-section"},Ve={key:0,class:"success-overlay"},Te={class:"success-modal"},Ne={class:"modal-actions"},Ue=j({__name:"add",async setup(Re){let _,E;const m=te(),W=J(),$=K(),g=r($.query.date||null),{data:V}=([_,E]=Q(async()=>P("exercises",async()=>{const{data:s}=await m.from("exercises").select("*").order("name");return s||[]})),_=await _,E(),_),c=r(""),a=r([{weight:null,reps:null}]),v=r(""),f=r(!1),k=r(!1),T=r(60),N=r(0),h=r(0),q=()=>{c.value="",a.value=[{weight:null,reps:null}],v.value="",h.value=0,k.value=!1},I=()=>{var t;const s=(t=V.value)==null?void 0:t.find(p=>p.name===c.value);s&&(s.default_rest_time&&(T.value=s.default_rest_time),s.default_work_time!==void 0&&(N.value=s.default_work_time),a.value.length===1&&a.value[0].weight===null&&a.value[0].reps===null&&s.default_sets&&(a.value=Array.from({length:s.default_sets},()=>({weight:s.default_weight||null,reps:s.default_reps||null}))))},L=()=>{const s=a.value[a.value.length-1];a.value.push({weight:s.weight,reps:s.reps})},M=s=>{s>0&&(a.value[s].weight=a.value[s-1].weight,a.value[s].reps=a.value[s-1].reps)},z=s=>{a.value.length>1&&a.value.splice(s,1)},G=async()=>{const{data:{user:s}}=await m.auth.getUser();if(!s){alert("„É≠„Ç∞„Ç§„É≥„Çª„ÉÉ„Ç∑„Éß„É≥„ÅåÂàá„Çå„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂÜçÂ∫¶„É≠„Ç∞„Ç§„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ");return}if(!c.value){alert("Á®ÆÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ");return}f.value=!0;try{const{data:t,error:p}=await m.from("workouts").insert({user_id:s.id,exercise_name:c.value,note:v.value||null,weight:a.value[0].weight,reps:a.value[0].reps,sets:a.value.length,date:g.value||void 0}).select().single();if(p)throw new Error("‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: "+p.message);const y=a.value.map((n,i)=>({workout_id:t.id,set_number:i+1,weight:n.weight,reps:n.reps})),{error:o}=await m.from("workout_sets").insert(y);if(o)throw new Error("„Çª„ÉÉ„ÉàÊÉÖÂ†±„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: "+o.message);k.value=!0}catch(t){alert(t.message)}finally{f.value=!1}};return(s,t)=>{const p=H,y=O;return d(),u("div",ae,[e("div",oe,[t[3]||(t[3]=e("h1",null,"üìù „ÉØ„Éº„ÇØ„Ç¢„Ç¶„ÉàË®òÈå≤",-1)),e("p",le,w(l(g)?l(g)+" „ÅÆË®òÈå≤":"‰ªäÊó•„ÅÆ„Éà„É¨„Éº„Éã„É≥„Ç∞„ÇíË©≥Á¥∞„Å´Ë®òÈå≤„Åó„Åæ„Åó„Çá„ÅÜ"),1)]),e("div",ne,[e("div",re,[e("div",ie,[e("div",ue,[t[5]||(t[5]=e("label",{for:"exercise"},"Á®ÆÁõÆ„ÇíÈÅ∏Êäû *",-1)),e("div",de,[b(e("select",{id:"exercise","onUpdate:modelValue":t[0]||(t[0]=o=>U(c)?c.value=o:null),required:"",class:"select-input",onChange:I},[t[4]||(t[4]=e("option",{value:"",disabled:""},"Á®ÆÁõÆ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ",-1)),(d(!0),u(R,null,A(l(V),o=>(d(),u("option",{key:o.id,value:o.name},w(o.name),9,ce))),128))],544),[[X,l(c)]])])]),t[8]||(t[8]=Y('<div class="sets-header" data-v-a84fd125><span class="label-set" data-v-a84fd125>SET</span><span class="label-weight" data-v-a84fd125>WEIGHT (kg)</span><span class="label-reps" data-v-a84fd125>REPS</span><span class="label-action" data-v-a84fd125></span></div>',1)),e("div",pe,[(d(!0),u(R,null,A(l(a),(o,n)=>(d(),u("div",{key:n,class:ee(["set-row",{"current-focus":l(h)===n}]),onClick:i=>h.value=n},[e("div",_e,w(n+1),1),e("div",me,[b(e("input",{type:"number",step:"0.5",min:"0","onUpdate:modelValue":i=>o.weight=i,placeholder:"0.0"},null,8,fe),[[C,o.weight]])]),e("div",he,[b(e("input",{type:"number",min:"0","onUpdate:modelValue":i=>o.reps=i,placeholder:"0"},null,8,we),[[C,o.reps]])]),e("div",be,[n>0?(d(),u("button",{key:0,type:"button",onClick:F(i=>M(n),["stop"]),class:"btn-icon",title:"Ââç„Çª„ÉÉ„Éà„Çí„Ç≥„Éî„Éº"},"üìã",8,ge)):S("",!0),l(a).length>1?(d(),u("button",{key:1,type:"button",onClick:F(i=>z(n),["stop"]),class:"btn-icon btn-delete",title:"ÂâäÈô§"},"√ó",8,ke)):S("",!0)])],10,ve))),128))]),e("button",{type:"button",onClick:L,class:"btn btn-add-set"}," Ôºã „Çª„ÉÉ„Éà„ÇíËøΩÂä† "),e("div",ye,[t[6]||(t[6]=e("label",{for:"note",class:"note-label"},[e("span",{class:"icon"},"‚úçÔ∏è"),B(" „É°„É¢ ")],-1)),e("div",Ce,[b(e("textarea",{id:"note","onUpdate:modelValue":t[1]||(t[1]=o=>U(v)?v.value=o:null),rows:"3",placeholder:"Ê∞ó„Å•„ÅÑ„Åü„Åì„Å®„ÄÅ„Éï„Ç©„Éº„É†„ÅÆÊÑüË¶ö„Å™„Å©..."},null,512),[[C,l(v)]])])]),e("div",xe,[e("button",{onClick:G,class:"btn btn-submit",disabled:l(f)},w(l(f)?"‰øùÂ≠ò‰∏≠...":"üìä Ë®òÈå≤„ÇíÂÆå‰∫Ü„Åô„Çã"),9,Se),x(p,{to:"/workouts",class:"btn btn-cancel"},{default:D(()=>[...t[7]||(t[7]=[B("„Ç≠„É£„É≥„Çª„É´",-1)])]),_:1})])])]),e("div",Ee,[x(y,{"default-rest-time":l(T),"default-work-time":l(N),"current-set":l(h)+1,"total-sets":l(a).length},null,8,["default-rest-time","default-work-time","current-set","total-sets"])])]),x(Z,{name:"fade"},{default:D(()=>[l(k)?(d(),u("div",Ve,[e("div",Te,[t[9]||(t[9]=e("div",{class:"success-icon"},"‚úÖ",-1)),t[10]||(t[10]=e("h2",null,"Ë®òÈå≤ÂÆå‰∫ÜÔºÅ",-1)),t[11]||(t[11]=e("p",null,"„ÅäÁñ≤„ÇåÊßò„Åß„Åó„Åü„ÄÇÊ¨°„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",-1)),e("div",Ne,[e("button",{onClick:q,class:"btn btn-primary"},"Âà•„ÅÆÁ®ÆÁõÆ„ÇíÁ∂ö„Åë„Å¶ÁôªÈå≤"),e("button",{onClick:t[2]||(t[2]=o=>l(W).push("/workouts")),class:"btn btn-outline"},"Â±•Ê≠¥‰∏ÄË¶ß„Å∏Êàª„Çã")])])])):S("",!0)]),_:1})])}}}),$e=se(Ue,[["__scopeId","data-v-a84fd125"]]);export{$e as default};
